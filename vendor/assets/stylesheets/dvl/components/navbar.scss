$navBackground: #0f1c3c !default;
$navText: #eee !default;
$navHeight: 3.715rem !default; // 52px @ 14px
$navHoverBackground: darken($navBackground, 5%) !default;

// might want to adjust this based on how many items are in your nav
$navBreakpoint: 800px !default;

.navbar {
  background-color: $navBackground;
  line-height: $navHeight;
  min-height: $navHeight;
  z-index: $z_navbar;

  // Add specificity to override text-decoration.
  .navbar_brand,
  .navbar_toggle,
  .navbar_content > ul > li > a {
    color: $navText;
    text-decoration: none;

    &:hover {
      color: lighten($navText, 10%);
    }
  }

  // Fix buttons inside navbar
  .button {
    font-size: 0.9rem;
  }

  // Override display: inline-block for proper stacking
  .dropdown_navbar {
    display: block;
  }
}

// Allow for badges and things
.navbar_content > ul > li {
  position: relative;
}

.navbar_content > ul > li > a {
  font-weight: $weightBold;
  font-size: 0.9rem;
}

// Modifier for fixed navbar
.navbar_sticky {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
}

.navbar_brand {
  float: left;
  font-size: 1.5rem;
  line-height: $navHeight;
  &:focus {
    outline: 0;
    opacity: 0.7;
  }
  img {
    position: relative;
    display: block;
    top: 0;
    max-height: $navHeight - 1.5rem;
    margin: 0.75rem 0;
  }
}

// The "hamburger" button
.navbar_toggle {
  float: right;
  font-size: 2rem;
  line-height: $navHeight;
}

.navbar_content_wrapper {
  clear: both;
  display: none;
}

.nav_avatar {
  height: 28px;
  width: 28px;
  @include avatar;
  // add some margin for the bottom of the collapsed nav
  margin-bottom: 0.75rem;
}

.navbar_search_form {
  input[type=text] {
    margin-top: ($navHeight - $inputHeight) / 2;
    margin-bottom: ($navHeight - $inputHeight) / 2;
    padding-left: 0.6rem;
    padding-right: 0.6rem;
    background: rgba(0, 0, 0, 0.5);
    border-color: $black;
    color: $navText;

    &:focus {
      border-color: $darkBlue;
    }
  }
}

// Utility class for hiding/showing content
.navbar_full_i {
  display: none;
}

.navbar_badge {
  background-color: $alertColor;
  text-align: center;
  display: inline-block;
  padding: 0 0.5rem;
  height: 1.5rem;
  line-height: 1.5rem;
  font-size: 0.75rem;
  border-radius: 0.75rem;
  margin-left: 0.5rem;
}

@media only screen and (min-width: $navBreakpoint) {
  .navbar_collapsed_i {
    display: none;
  }

  .navbar_full_i {
    display: inline;
  }

  .navbar {
    line-height: $navHeight;
    min-height: $navHeight;
  }

  .navbar_sticky {
    position: fixed;
  }

  .nav_avatar {
    margin-bottom: 0;
  }

  // Float almost everything. Can't use inline-block because it
  // gets messed up with line-height
  .navbar_header,
  .navbar_content,
  .navbar_content > ul,
  .navbar_content > ul > li,
  .navbar_search_form {
    float: left;
  }

  // Margin between brand and items
  .navbar_brand {
    margin-right: 1rem;
  }

  .navbar_toggle {
    display: none;
  }

  // Show the content
  .navbar_content_wrapper {
    display: block;
    clear: none;
  }

  .navbar_search_form {
    padding: 0 0.75rem;
    width: auto;
  }

  .navbar_content {
    // Add X padding to nav items
    > ul > li > a {
      padding: 0 0.75rem;
    }

    // Ensure links take up the full height
    > ul > li > a {
      display: block;
    }

    // Hover styles
    > ul > li > a:hover,
    > ul > li > a:focus,
    > ul > li.active > a {
      background-color: $navHoverBackground;
    }
    > ul > li > a:focus {
      outline: 0;
    }
  }

  // Add even more padding to icon items
  .navbar_icon {
    padding: 0 0.5rem;
  }

  // Float the secondary content to the right and handle dropdowns
  .navbar_content_secondary {
    float: right;

    .dropdown_menu {
      right: 0;
      left: auto;
    }
  }

  .navbar_badge {
    position: absolute;
    top: 0.5rem;
    right: 0;
  }
}
