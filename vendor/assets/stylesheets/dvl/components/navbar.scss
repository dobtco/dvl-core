$navBackground: #0074D9 !default;
$navText: #eee !default;
$navHeight: 3.75rem !default;
$navZ: 1000 !default;
$navHoverBackground: darken($navBackground, 5%) !default;

// Make it a bit more condensed when collapsed
$navCollapsedLineHeight: $navHeight * 0.8 !default;

// might want to adjust this based on how many items are in your nav
$navBreakpoint: 800px !default;

// (height / input height) / 2
@mixin navItemMargin($navHeight) {
  margin-top: ($navHeight - $inputHeight) / 2;
  margin-bottom: ($navHeight - $inputHeight) / 2;
}

.navbar {
  background-color: $navBackground;
  line-height: $navCollapsedLineHeight;
  min-height: $navCollapsedLineHeight;
  z-index: $navZ;

  // Add specificity to override text-decoration.
  .navbar_brand,
  .navbar_toggle,
  .navbar_content > ul > li > a {
    color: $navText;
    text-decoration: none;

    &:hover {
      color: lighten($navText, 10%);
    }
  }
}

// Modifier for fixed navbar
.navbar_fixed {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
}

.navbar_brand {
  float: left;
  font-size: 1.5rem;
  line-height: $navHeight;

  img {
    position: relative;
    display: block;
    top: 0;
    max-height: $navHeight - 1.25rem;
    margin: 0.625rem 0;
  }
}

// The "hamburger" button
.navbar_toggle {
  float: right;
  font-size: 2rem;
  line-height: $navHeight;
}

.navbar_content_wrapper {
  clear: both;
  display: none;
}

.navbar_content {
  input[type=text] {
    @include navItemMargin($navCollapsedLineHeight);
    padding-left: 0.6rem;
    padding-right: 0.6rem;
    background: rgba(0, 0, 0, 0.5);
    border-color: $black;
    color: $navText;

    &:focus {
      border-color: $darkBlue;
    }
  }
}

.nav_avatar {
  height: 28px;
  width: 28px;
  border-radius: 50%;
  // add some margin for the bottom of the collapsed nav
  margin-bottom: 0.75rem;
}

@media only screen and (min-width: $navBreakpoint) {
  .navbar {
    line-height: $navHeight;
    min-height: $navHeight;
  }

  .nav_avatar {
    margin-bottom: 0;
  }

  // Float almost everything. Can't use inline-block because it
  // gets messed up with line-height
  .navbar_header,
  .navbar_content,
  .navbar_content > ul,
  .navbar_content > ul > li,
  .navbar_search_form {
    float: left;
  }

  // Margin between brand and items
  .navbar_brand {
    margin-right: 1rem;
  }

  .navbar_toggle {
    display: none;
  }

  // Show the content
  .navbar_content_wrapper {
    display: block;
    clear: none;
  }

  .navbar_search_form {
    padding: 0 0.75rem;
    width: auto;
  }

  .navbar_content {
    // Add X padding to nav items
    > ul > li > a {
      padding: 0 0.75rem;
    }

    input[type=text] {
      @include navItemMargin($navHeight);
    }

    // Ensure links take up the full height
    > ul > li > a {
      display: block;
    }

    // Hover styles
    > ul > li > a:hover,
    > ul > li.active > a {
      background-color: $navHoverBackground;
    }
  }

  // Float the secondary content to the right and handle dropdowns
  .navbar_content_secondary {
    float: right;

    .dropdown_menu {
      right: 0;
      left: auto;
    }
  }
}
